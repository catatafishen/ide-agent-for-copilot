<idea-plugin>
  <id>com.github.catatafishen.ideagentforcopilot</id>
  <name>IDE Agent for Copilot</name>
  <vendor email="support@example.com" url="https://github.com/yourusername/intellij-copilot-plugin">
    IDE Agent for Copilot Contributors
  </vendor>

  <description><![CDATA[
    <p>Lightweight IntelliJ Platform plugin that embeds GitHub Copilot's agent capabilities directly into your IDE
    via the Agent Client Protocol (ACP).</p>

    <h3>Features</h3>
    <ul>
        <li>AI-powered multistep planning and execution via GitHub Copilot</li>
        <li>Direct ACP integration - no sidecar or SDK required</li>
        <li>Rich context management with code selections and symbols</li>
        <li>Visual plan tracking with real-time progress</li>
        <li>Timeline view of agent reasoning and tool invocations</li>
        <li>Model selection (Claude, GPT, Gemini) with usage indicators</li>
    </ul>

    <h3>Requirements</h3>
    <ul>
        <li>GitHub Copilot subscription</li>
        <li>GitHub Copilot CLI installed (<code>winget install GitHub.Copilot</code>)</li>
    </ul>
    ]]></description>

  <change-notes><![CDATA[
    <h3>0.2.0</h3>
    <ul>
        <li>Direct ACP integration â€” removed Go sidecar and SDK dependency</li>
        <li>Real model listing from Copilot (Claude, GPT, Gemini families)</li>
        <li>Streaming chat responses via ACP protocol</li>
        <li>Copilot CLI login flow with auto-detection</li>
    </ul>
    <h3>0.1.0</h3>
    <ul>
        <li>Initial technical preview release</li>
        <li>Tool Window with Prompt, Context, Plans, and Timeline views</li>
    </ul>
    ]]></change-notes>

  <!-- Require IntelliJ Platform 2025.1+ (compatible through 2025.3) -->
  <idea-version since-build="251" until-build="253.*"/>

  <!-- Plugin dependencies -->
  <depends>com.intellij.modules.platform</depends>
  <depends optional="true" config-file="java-features.xml">com.intellij.modules.java</depends>
  <depends optional="true" config-file="git-features.xml">Git4Idea</depends>
  <depends optional="true" config-file="terminal-features.xml">org.jetbrains.plugins.terminal</depends>

  <!-- Extension points and implementations -->
  <extensions defaultExtensionNs="com.intellij">
    <!-- New UI (expui) icon mapping -->
    <iconMapper mappingFile="CopilotBridgeIconMappings.json"/>

    <!-- Tool Window -->
    <toolWindow id="IDE Agent for Copilot"
                secondary="false"
                anchor="right"
                icon="/icons/copilot.svg"
                factoryClass="com.github.copilot.intellij.ui.AgenticCopilotToolWindowFactory"/>

    <!-- Application Services -->
    <applicationService
      serviceImplementation="com.github.copilot.intellij.services.AgenticCopilotService"/>
    <applicationService
      serviceImplementation="com.github.copilot.intellij.services.CopilotService"/>

    <!-- Project Services -->
    <projectService
      serviceImplementation="com.github.copilot.intellij.psi.PsiBridgeService"/>

    <!-- Start PSI Bridge when the project opens -->
    <postStartupActivity
      implementation="com.github.copilot.intellij.psi.PsiBridgeStartup"/>

    <!-- Notification Group for Copilot status messages -->
    <notificationGroup id="Copilot Notifications" displayType="STICKY_BALLOON"/>
  </extensions>

  <actions>
    <!-- Actions will be added here -->
  </actions>
</idea-plugin>
